<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:AvaloniaStreamer.ViewModels"
        mc:Ignorable="d"
        d:DesignWidth="800"
        d:DesignHeight="600"
        x:Class="AvaloniaStreamer.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Title="ГойдаСтрим"
        MinWidth="400"
        MinHeight="500"
        SizeToContent="WidthAndHeight"
        WindowStartupLocation="CenterScreen"
        x:Name="RootWindow">

	<Design.DataContext>
		<vm:MainWindowViewModel/>
	</Design.DataContext>

	<ScrollViewer HorizontalScrollBarVisibility="Auto"
                 VerticalScrollBarVisibility="Auto"
                 Padding="20">
		<StackPanel Spacing="15" MinWidth="350">
			<!-- Захват экрана -->
			<StackPanel Spacing="10">
				<TextBlock Text="Screen Capture" FontWeight="Bold"/>
				<StackPanel Orientation="Horizontal" Spacing="10">
					<Button Content="Capture"
                           Command="{Binding CaptureCommand}"
                           MinWidth="120"/>
					<Button Content="Start Rec"
                           Command="{Binding StartContinuousCommand}"
                           MinWidth="120"/>
					<Button Content="Stop Rec"
                           Command="{Binding StopContinuousCommand}"
                           MinWidth="120"/>
				</StackPanel>
			</StackPanel>
			<!-- Превью изображения -->
			<Border BorderBrush="Gray" BorderThickness="1"
					HorizontalAlignment="Center"
					MaxWidth="800"
					MaxHeight="500">
				<Image Source="{Binding CapturedImage}"
					   Stretch="Uniform"
					   Width="600"
					   Height="400"/>
			</Border>

			<TextBlock Text="{Binding Status}"
                      HorizontalAlignment="Center"
                      TextWrapping="Wrap"/>

			<!-- Настройки аудио -->
			<StackPanel Spacing="10">
				<TextBlock Text="Audio Settings" FontWeight="Bold"/>
				<CheckBox IsChecked="{Binding CaptureSystemAudio}"
                         Content="System Audio"/>
				<CheckBox IsChecked="{Binding CaptureMicrophone}"
                         Content="Microphone"/>

				<StackPanel Orientation="Horizontal" Spacing="10">
					<Button Content="Start Audio"
                           Command="{Binding StartAudioCaptureCommand}"
                           MinWidth="120"/>
					<Button Content="Stop Audio"
                           Command="{Binding StopAudioCaptureCommand}"
                           MinWidth="120"/>
				</StackPanel>
			</StackPanel>

			<!-- Воспроизведение -->
			<StackPanel Spacing="10">
				<TextBlock Text="Audio Playback" FontWeight="Bold"/>
				<StackPanel Orientation="Horizontal" Spacing="10">
					<Button Content="▶ System"
                           Command="{Binding PlaySystemAudioCommand}"
                           MinWidth="100"/>
					<Button Content="▶ Mic"
                           Command="{Binding PlayMicrophoneAudioCommand}"
                           MinWidth="100"/>
					<Button Content="⏹ Stop"
                           Command="{Binding StopAudioPlaybackCommand}"
                           MinWidth="100"/>
				</StackPanel>
				<Slider Minimum="0" Maximum="1"
                       Value="{Binding Volume}"
                       Width="200"
                       HorizontalAlignment="Left"
                       TickFrequency="0.1"
                       ToolTip.Tip="Volume"/>
			</StackPanel>
		</StackPanel>
	</ScrollViewer>
</Window>